
# Rancher Rio

- 官网[github](https://github.com/rancher/rio)
- 刘健
- 20190527

--- 

### 安装条件

* k8 1.13及以上
  - k3s
  -  RKE
  -  Minikube
  -  Docker For Mac Edge
  -  GKE
  -  AKS
  -  EKS
* 3G以上内存 (部分节点可能引用更多)

---

### 优势
* 获得持续交付
* DNS
* HTTPS
* 路由
* 监控
* 自动扩缩容
* 金丝雀部署
* git触发构建等

---

### 架构

加速集群中部署、管理、扩展和编写无状态的应用程序。

![](https://oscimg.oschina.net/oscnet/a7af55bd13d3756d16e876284cb2d4ea946.jpg) 

---

#### 组件分析  ISTIO
一个用来连接、管理和保护微服务的开放平台。 
在已部署服务网络中新增**负载均衡**、**服务间认证**、**监控**等功能。

+++

##### ISTIO特性
* 流量管理(Pilot)。服务之间的流量和API调用的流向。
* 可观察性。快速了解服务之间的依赖关系，以及它们之间流量的本质和流向。
* 策略执行(mixer)。通过配置网格来修改服务间的访问策略。
* 服务身份和安全(Istio-auth)。认证网络及流量保护，可在不同可信度的网络上流转。
* 跨平台支持。包括Kubernetes、跨云、预置环境、Mesos等。
* 集成和定制。策略执行组件可以扩展和定制，以便与现有的ACL、日志、监控、配额、审核等解决方案集成

> * [参考文档](https://blog.csdn.net/ythunder/article/details/79842373)

+++

* 范围的可见性： Istio可以使用Zipkin跟踪分析性能热点和分布式故障模式的诊断。
* 灵活性和效率：供了一种统一的方法来配置重试，负载平衡，流量控制（HTTP / 2）和断路以补偿由于不可靠的网络导致的一些常见故障模式。
* 开发人员的生产力：支持A / B测试，canarying和故障注入的常用功能，进一步提高生产力。
* 政策驱动行动：在流量中注入故障或延迟、速率限制、定义ACL。
* 默认安全：使用TLS连接来认证和保护服务之间的所有通信。
* 增量采用：对网络中运行的服务完全透明，允许团队随着时间推移逐步采用Istio的功能。

> [参考文档](https://blog.csdn.net/jettery/article/details/73275039)

---

#### 组件分析 KNATIVE
* 自动完成代码到容器的构建
* 把应用（或者函数）和特定的事件进行绑定：当事件发生时，自动触发应用（或者函数）
* 网络的路由和流量控制
* 应用的自动伸缩

+++

KNATIVE 结构划分
    * build
    * serving
    * eventing
    
+++

**Build**：构建系统，把用户定义的函数和应用 build 成容器镜像。

* k8内
* 标准化

+++

**Serving**：服务系统，用来配置应用的路由、升级策略、自动扩缩容等功能(如启停、服务、蓝绿、回滚等)

+++

 ![](media/15589407273063.jpg)

![](media/15589408457238.jpg)

+++

* **Eventing**：事件系统，用来自动完成事件的绑定和触发

 ![](media/15589408835381.jpg)

+++

> * [参考文档](https://cizixs.com/2018/08/25/knative-serverless-platform/)

---

### 价值优势
**快速**部署和管理应用程序：您可以快速、自信地部署和管理应用程序。

**轻量**级：Rio可以安装在任何Kubernetes集群中；

**扩展强大**：您可以方便快捷地使用Prometheus、Knative和Istio；

**自动扩缩容**：基于Prometheus**第4层和第7层**度量的自动缩放。

+++

确保应用程序的高度**安全**：所有应用程序在启动时，均可使用最安全的**网络配置**。

**加密**：您的工作负载将从LetsEncrypt那里接收一个DNS记录和一个通配符证书；

**账户兼容**：Rio与Kubernetes RABC集成，以实现最大安全性；

**限制**：您的应用程序自动包含资源限制，以获得最佳集群性能。

+++

为用户提供最优的全新版本体验：分阶段推广新版本，不断为用户提供优秀的使用体验。

简化你的Pipeline：Rio可以监控远程的镜像仓库，您可以告诉它在您提交自动更改时自动构建和部署新版本；

永流畅的使用体验：在推出新版本的应用程序时，Rio了解当前的负载并扩展以获得最大性能。

--- 
### 使用方法

+++
#### 安装
$ rio install

+++

#### 状态确定
$ kubectl get po -n rio-system

+++

#### 运行
$ rio run https://github.com/rancher/rio-demo

+++

#### 状态监测
$ rio ps
$ rio console
$ rio info

---

谢谢观看


